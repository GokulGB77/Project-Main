<%- include('../layouts/header.ejs',{userId:userId}) %>



    <!------------------------------------------------------------------------FORM ACTION------------------------------------------------------------------------------------------------>
    <!------------------------------------------------------------------------FORM ACTION------------------------------------------------------------------------------------------------>
    <!------------------------------------------------------------------------FORM ACTION------------------------------------------------------------------------------------------------>
    <!------------------------------------------------------------------------FORM ACTION------------------------------------------------------------------------------------------------>
    <!------------------------------------------------------------------------FORM ACTION------------------------------------------------------------------------------------------------>

    <section class="login-register-area pb-100 pt-100">
        <div class="container">
            <div class="row">
                <div class="col-lg-8 col-md-12 offset-lg-2">
                    <div class="login-register-wrapper">
                        <div class="tab-content">
                            <div id="lg1" class="tab-pane active">
                                <div class="login-form-container mb-50" >

                                    <div id="form-container" >
                                        <div class="login-register-tab-list nav">
                                            <h4> Reset Password </h4>
                                        </div>
                                        <div class="login-register-form">
                                            <div style="margin-bottom: 20px;">
                                                <div id="error-message" class="text-center">

                                                </div>
                                            </div>
                                            <form method="post" action="/reset-password" id="reset-password-form">
                                                <input type="text" name="email" id="email"
                                                    placeholder="Enter Your Email" required>


                                                <div class="button-box btn-hover text-center">
                                                    <button type="submit">Send OTP</button>
                                                </div>
                                                <div style="margin-top:20px">

                                                </div>
                                            </form>
                                        </div>

                                        <script>
                                            document.getElementById("reset-password-form").addEventListener("submit", async function (event) {
                                                event.preventDefault();
                                                const email = document.getElementById("email").value;

                                                try {
                                                    // Make fetch request to submit form data
                                                    const response = await fetch("/reset-password-otp", {
                                                        method: "POST",
                                                        headers: {
                                                            "Content-Type": "application/json"
                                                        },
                                                        body: JSON.stringify({ email: email })
                                                    });

                                                    if (response.ok) {
                                                        // If request is successful, replace the entire form div with the new form
                                                        const formContainer = document.getElementById("form-container");
                                                        formContainer.innerHTML = `
                                                        <div class="login-register-tab-list nav">
                                                            <h4> Verify OTP </h4>
                                                        </div>
                                                        <div class="login-register-tab-list nav">
                                                            <p>A verification OTP is sent to your registered email </p>
                                                        </div>
                                                        <div class="login-register-form">
                                                            <div style="margin-bottom: 20px;">
                                                                <div id="error-message" class="text-center"></div>
                                                            </div>
                                                            <form method="post" action="/verify-password-otp" id="verify-otp-form">
                                                                <input type="hidden" name="email" value="${email}">
                                                                <input type="text" name="otp" id="otp" placeholder="Enter Otp" required>
                                                    
                                                                <div class="button-box btn-hover text-center">
                                                                    <button type="submit">Verify OTP</button>
                                                                </div>
                                                                <div style="margin-top:20px"></div>
                                                            </form>
                                                        </div>
                                                        `;
                                                    } else {
                                                        console.error("Error submitting form:", response.statusText);
                                                        const errorMessage = await response.json();
                                                        const errorMessageDiv = document.getElementById("error-message");
                                                        errorMessageDiv.innerHTML = `<h5 style="color: red;">${errorMessage.errorMessage}</h5>`;
                                                    }
                                                } catch (error) {
                                                    console.error("Error submitting form:", error.message);
                                                }
                                            });

                                        </script>
                                        <script>
                                            document.getElementById("reset-password-form").addEventListener("submit", async function (event) {
                                                event.preventDefault();
                                                const email = document.getElementById("email").value;

                                                try {
                                                    // Make fetch request to submit form data
                                                    const response = await fetch("/reset-password", {
                                                        method: "POST",
                                                        headers: {
                                                            "Content-Type": "application/json"
                                                        },
                                                        body: JSON.stringify({ email: email })
                                                    });

                                                    if (response.ok) {
                                                        // If request is successful, replace the entire form div with the new form
                                                        const formContainer = document.getElementById("form-container");
                                                        formContainer.innerHTML = `
                                                        <div class="login-register-tab-list nav">
                                                            <h4> Verify OTP </h4>
                                                        </div>
                                                        <div class="login-register-tab-list nav">
                                                            <p>A verification OTP is sent to your registered email </p>
                                                        </div>
                                                        <div class="login-register-form">
                                                            <div style="margin-bottom: 20px;">
                                                                <div id="error-message" class="text-center"></div>
                                                            </div>
                                                            <form method="post" action="/verify-password-otp" id="verify-otp-form">
                                                                <input type="hidden" name="email" value="${email}">
                                                                <input type="text" name="otp" id="otp" placeholder="Enter Otp" required>
                                                    
                                                                <div class="button-box btn-hover text-center">
                                                                    <button type="submit">Verify OTP</button>
                                                                </div>
                                                                <div style="margin-top:20px"></div>
                                                            </form>
                                                        </div>
                                                        `;
                                                    } else {
                                                        console.error("Error submitting form:", response.statusText);
                                                        const errorMessage = await response.json();
                                                        const errorMessageDiv = document.getElementById("error-message");
                                                        errorMessageDiv.innerHTML = `<h5 style="color: red;">${errorMessage.errorMessage}</h5>`;
                                                    }
                                                } catch (error) {
                                                    console.error("Error submitting form:", error.message);
                                                }
                                            });

                                        </script>



                                        <hr class="my-4">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <footer class="footer-area">
        <div class="bg-gray-2">
            <div class="container">
                <div class="footer-top pt-80 pb-35">
                    <div class="row">
                        <div class="col-lg-3 col-md-6 col-sm-6 col-12">
                            <div class="footer-widget footer-about mb-40">
                                <div class="footer-logo">
                                    <a href="index"><img src="/user/images/logo/logo.png" alt="logo"></a>
                                </div>
                                <p>Lorem ipsum dolor sit amet, cons adipi elit, sed do eiusmod tempor incididunt ut
                                    aliqua.</p>
                                <div class="payment-img">
                                    <a href="#"><img src="/user/images/icon-img/payment.png" alt="logo"></a>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-3 col-md-6 col-sm-6 col-12">
                            <div class="footer-widget footer-widget-margin-1 footer-list mb-40">
                                <h3 class="footer-title">Information</h3>
                                <ul>
                                    <li><a href="about-us">About Us</a></li>
                                    <li><a href="#">Delivery Information</a></li>
                                    <li><a href="#">Privacy Policy</a></li>
                                    <li><a href="#">Terms & Conditions</a></li>
                                    <li><a href="#">Customer Service</a></li>
                                </ul>
                            </div>
                        </div>
                        <div class="col-lg-2 col-md-6 col-sm-6 col-12">
                            <div class="footer-widget footer-list mb-40">
                                <h3 class="footer-title">My Account</h3>
                                <ul>
                                    <li><a href="profile">My Account</a></li>
                                    <li><a href="#">Order History</a></li>
                                    <li><a href="wishlist">Wish List</a></li>
                                    <li><a href="#">Newsletter</a></li>
                                    <li><a href="#">Order History</a></li>
                                </ul>
                            </div>
                        </div>
                        <div class="col-lg-4 col-md-6 col-sm-6 col-12">
                            <div class="footer-widget footer-widget-margin-2 footer-address mb-40">
                                <h3 class="footer-title">Get in touch</h3>
                                <ul>
                                    <li><span>Address: </span>Your address goes here </li>
                                    <li><span>Telephone Enquiry:</span> (012) 345 6789</li>
                                    <li><span>Email: </span>demo@example.com</li>
                                </ul>
                                <div class="open-time">
                                    <p>Open : <span>8:00 AM</span> - Close : <span>18:00 PM</span></p>
                                    <p>Saturday - Sunday : Close</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="bg-gray-3">
            <div class="container">
                <div class="footer-bottom copyright text-center bg-gray-3">
                    <p>Copyright ©2022 All rights reserved | Made with love </p>
                </div>
            </div>
        </div>
    </footer>
    <!-- Mobile Menu start -->
    <div class="off-canvas-active">
        <a class="off-canvas-close"><i class=" ti-close "></i></a>
        <div class="off-canvas-wrap">
            <div class="welcome-text off-canvas-margin-padding">
            </div>
            <div class="mobile-menu-wrap off-canvas-margin-padding-2">
                <div id="mobile-menu" class="slinky-mobile-menu text-left">
                    <ul>
                        <li>
                            <a href="#">HOME</a>
                            <ul>
                                <li><a href="index">Home version 1 </a></li>
                                <li><a href="index-2">Home version 2</a></li>
                                <li><a href="index-3">Home version 3</a></li>
                                <li><a href="index-4">Home version 4</a></li>
                                <li><a href="index-5">Home version 5</a></li>
                                <li><a href="index-6">Home version 6</a></li>
                                <li><a href="index-7">Home version 7</a></li>
                                <li><a href="index-8">Home version 8</a></li>
                            </ul>
                        </li>
                        <li>
                            <a href="#">SHOP</a>
                            <ul>
                                <li>
                                    <a href="#">Shop Layout</a>
                                    <ul>
                                        <li><a href="shop">Standard Style</a></li>
                                        <li><a href="shop-sidebar">Shop Grid Sidebar</a></li>
                                        <li><a href="shop-list">Shop List Style</a></li>
                                        <li><a href="shop-list-sidebar">Shop List Sidebar</a></li>
                                        <li><a href="shop-right-sidebar">Shop Right Sidebar</a></li>
                                        <li><a href="shop-location">Store Location</a></li>
                                    </ul>
                                </li>
                                <li>
                                    <a href="#">Product Layout</a>
                                    <ul>
                                        <li><a href="product-details">Tab Style 1</a></li>
                                        <li><a href="product-details-2">Tab Style 2</a></li>
                                        <li><a href="product-details-gallery">Gallery style </a></li>
                                        <li><a href="product-details-affiliate">Affiliate style</a></li>
                                        <li><a href="product-details-group">Group Style</a></li>
                                        <li><a href="product-details-fixed-img">Fixed Image Style </a></li>
                                    </ul>
                                </li>
                            </ul>
                        </li>
                        <li>
                            <a href="#">PAGES </a>
                            <ul>
                                <li><a href="about-us">About Us </a></li>
                                <li><a href="cart">Cart Page</a></li>
                                <li><a href="checkout">Checkout </a></li>
                                <li><a href="profile">My Account</a></li>
                                <li><a href="wishlist">Wishlist </a></li>
                                <li><a href="compare">Compare </a></li>
                                <li><a href="contact-us">Contact us </a></li>
                                <li><a href="login-">Login </a></li>
                            </ul>
                        </li>
                        <li>
                            <a href="#">BLOG </a>
                            <ul>
                                <li><a href="blog">Blog Standard </a></li>
                                <li><a href="blog-sidebar">Blog Sidebar</a></li>
                                <li><a href="blog-details">Blog Details</a></li>
                            </ul>
                        </li>
                        <li>
                            <a href="about-us">ABOUT US</a>
                        </li>
                        <li>
                            <a href="contact-us">CONTACT US</a>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="language-currency-wrap language-currency-wrap-modify">
                <div class="currency-wrap border-style">
                    <a class="currency-active" href="#">>Rupee (INR) <i class=" ti-angle-down "></i></a>
                    <div class="currency-dropdown">
                        <ul>

                            <li><a href="#">$ Dollar (US)</a></li>
                        </ul>
                    </div>
                </div>
                <div class="language-wrap">
                    <a class="language-active" href="#"><img src="/user/images/icon-img/flag.png" alt="">
                        English <i class=" ti-angle-down "></i></a>
                    <div class="language-dropdown">
                        <ul>
                            <li><a href="#"><img src="/user/images/icon-img/flag.png" alt="">English </a>
                            </li>
                            <li><a href="#"><img src="/user/images/icon-img/spanish.png" alt="">Spanish</a>
                            </li>
                            <li><a href="#"><img src="/user/images/icon-img/arabic.png" alt="">Arabic </a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
    </div>




    <!-- <script>
    
    document.addEventListener('DOMContentLoaded', function() {
    const loginForm = document.getElementById('login-form');

    loginForm.addEventListener('submit', function(event) {
        event.preventDefault(); // Prevent default form submission

        const email = document.getElementById('email').value;
        const password = document.getElementById('password').value

        const formData = new FormData();
        formData.append('email', email);
        formData.append('password', password);

        fetch('/login', {
            method: 'POST',
            body: formData
        })
        .then(response => response.json()) // Parse the JSON response
        .then(data => {
            // Check if the login was successful
            if (data.success) {
                // Redirect to the home page or perform any other action
                window.location.href = '/home';
            } else {
                // Display error message
                document.getElementById('errorMessage').textContent = data.message;
            }
        })
        .catch(error => {
            console.error('Error:', error);
            // Display generic error message
            document.getElementById('errorMessage').textContent = 'An error occurred. Please try again.';
        });
    });
});

</script> -->

    <!-- All validation and ajax Js is here  -->
    <!-- <script src="/user/js/scripts/loginSubmitFormAjax.js"></script> -->

    <!-- All JS is here -->
    <script src="/user/js/vendor/modernizr-3.11.7.min.js"></script>
    <script src="/user/js/vendor/jquery-3.6.0.min.js"></script>
    <script src="/user/js/vendor/jquery-migrate-3.3.2.min.js"></script>
    <script src="/user/js/vendor/popper.min.js"></script>
    <script src="/user/js/vendor/bootstrap.min.js"></script>
    <script src="/user/js/plugins/wow.js"></script>
    <script src="/user/js/plugins/scrollup.js"></script>
    <script src="/user/js/plugins/aos.js"></script>
    <script src="/user/js/plugins/magnific-popup.js"></script>
    <script src="/user/js/plugins/jquery.syotimer.min.js"></script>
    <script src="/user/js/plugins/swiper.min.js"></script>
    <script src="/user/js/plugins/imagesloaded.pkgd.min.js"></script>
    <script src="/user/js/plugins/isotope.pkgd.min.js"></script>
    <script src="/user/js/plugins/jquery-ui.js"></script>
    <script src="/user/js/plugins/jquery-ui-touch-punch.js"></script>
    <script src="/user/js/plugins/jquery.nice-select.min.js"></script>
    <script src="/user/js/plugins/waypoints.min.js"></script>
    <script src="/user/js/plugins/jquery.counterup.js"></script>
    <script src="/user/js/plugins/select2.min.js"></script>
    <script src="/user/js/plugins/easyzoom.js"></script>
    <script src="/user/js/plugins/slinky.min.js"></script>
    <script src="/user/js/plugins/ajax-mail.js"></script>
    <!-- Main JS -->
    <script src="/user/js/main.js"></script>

    <!-- Animated icon  https://lordicon.com/icons/system/solid/39-trash -->
    <script src="https://cdn.lordicon.com/lordicon.js"></script>
    </body>